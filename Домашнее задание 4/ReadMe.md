# Ассемблер и интерпретатор для учебной виртуальной машин
Разработать ассемблер и интерпретатор для учебной виртуальной машины
(УВМ). Система команд УВМ представлена далее.
Для ассемблера необходимо разработать читаемое представление команд
УВМ. Ассемблер принимает на вход файл с текстом исходной программы, путь к
которой задается из командной строки. Результатом работы ассемблера является
бинарный файл в виде последовательности байт, путь к которому задается из
командной строки. Дополнительный ключ командной строки задает путь к файлулогу, в котором хранятся ассемблированные инструкции в духе списков
“ключ=значение”, как в приведенных далее тестах.
Интерпретатор принимает на вход бинарный файл, выполняет команды УВМ
и сохраняет в файле-результате значения из диапазона памяти УВМ. Диапазон
также указывается из командной строки.

Форматом для файла-лога и файла-результата является csv.

**Загрузка константы**

| A | B | C |
|---|---|---|
| Биты 0—2 | Биты 3-5 | Биты 6-27 |
| 7 | Адрес | Константа |

Размер команды: 5 байт. Операнд: поле C. Результат: регистр по адресу,
которым является поле B.

Тест (A=7, B=1, C=368):

0x0F, 0x5C, 0x00, 0x00, 0x00

**Чтение значения в память**

| A | B | C | D |
|---|---|---|---|
| Биты 0—2 | Биты 3-5 | Биты 6-8 | Биты 9-15|
| 1 | Адрес | Адрес | Константа |

Размер команды: 5 байт. Операнд: значение в памяти по адресу, которым
является сумма адреса (регистр по адресу, которым является поле C) и смещения
(поле D). Результат: регистр по адресу, которым является поле B.

Тест (A=1, B=3, C=2, D=12):

0x99, 0x18, 0x00, 0x00, 0x00

**Запись значения в память**

| A | B | C |
|---|---|---|
| Биты 0—2 | Биты 3-5 | Биты 6-37 |
| 7 | Адрес | Адрес |

Размер команды: 5 байт. Операнд: регистр по адресу, которым является поле
B. Результат: значение в памяти по адресу, которым является поле C.

Тест (A=5, B=1, C=82):

0x8D, 0x14, 0x00, 0x00, 0x00

**Бинарная операция: "<"**

| A | B | C | D |
|---|---|---|---|
| Биты 0—2 | Биты 3-5 | Биты 6-8 | Биты 9-15|
| 1 | Адрес | Адрес | Смещение |

Размер команды: 5 байт. Первый операнд: значение в памяти по адресу,
которым является сумма адреса (регистр по адресу, которым является поле B) и
смещения (поле D). Второй операнд: регистр по адресу, которым является поле C.
Результат: значение в памяти по адресу, которым является сумма адреса (регистр
по адресу, которым является поле B) и смещения (поле D).

Тест (A=4, B=7, C=4, D=68):

0x3C, 0x89, 0x00, 0x00, 0x00

# Запуск
Склонируйте весь репозиторий с помощью команды:
```
git clone https://github.com/Rapira16/config.git
```
Далее перейдите в папку Домашнее задание 4
```
cd Домашнее задание 4
```

Ассемблер принимает на вход текстовый файл с исходным кодом программы и выводит бинарный файл с ассемблированными инструкциями

Для запуска ассемблера, по шаблону запустите команду:

assembler.py - программу визуализатор

/путь/к/файлу/program.txt - путь к файлу с исходным кодом

/путь/к/файлу/output.bin - путь к файлу, в который будет записан бинарный код

/путь/к/файлу/log.txt - путь к файлу для логирования ассемблированных инструкций.

```Bash
python assembler.py program.txt output.bin log.txt
```

Интерпретатор принимает на вход бинарный файл и выполняет команды УВМ, сохраняя результаты в CSV-файл.

interpreter.py - программа интерпретатор

/путь/к/файлу/output.bin - путь к бинарному файлу с ассемблированными инструкциями.

/путь/к/файлу/result.csv - путь к файлу, в который будут записаны результаты выполнения

```Bash
python interpreter.py output.bin result.csv
```

Дополнительные библиотеки устанавливать не требуется.

# Пример работы преобразователя
Входные данные
```
LOAD 0 0 0
LOAD 1 5 1
LOAD 2 4 2
LOAD 3 3 3
LOAD 4 2 4
LOAD 5 1 5
LOAD 0 1 6
LOAD 1 2 7
LOAD 2 3 8
LOAD 3 4 9
LOAD 4 5 10
LOAD 5 0 11
LESS_THAN 0 0 12
LESS_THAN 1 1 13
LESS_THAN 2 2 14
LESS_THAN 3 3 15
LESS_THAN 4 4 16
LESS_THAN 5 5 17
```

Векторы
```
A = 0, 5, 4, 3, 2, 1;
B = 1, 2, 3, 4, 5, 0;
```

Вывод
```
C[0],1
C[1],0
C[2],0
C[3],1
C[4],1
C[5],0

```

# Тестирование
В файле input.txt представлен пример преобразования кода
![](https://github.com/Rapira16/config/blob/main/Домашнее%20задание%204/Снимок%20экрана%20от%202024-11-17%2013-07-57.png)



